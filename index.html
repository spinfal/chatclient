<!DOCTYPE html>
<html lang="en">
  <head>
    <title>anonymous chat thing</title>
    <meta charset="UTF-8">
    <meta name="description" content="chat without authentication"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="icon"
          type="image/png"
          href="https://files.catbox.moe/eaq7ty.png">
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="main.css" rel="stylesheet">
  </head>
  <body onkeypress="startFocus()" id="body">
    <div class="welcome">
      <div class="side create">
        <h1 id="mobile">create a chat</h1>
        <input type="text" placeholder="username (optional)" id="c-custom-name" class="input" maxlength="20"><br>
        <button class="button" id="create">create</button>
      </div>
      <div class="line"></div>
      <div class="side custom">
      	<h1 id="mobile">custom chat code</h1>
      	<div><input type="text" placeholder="custom ID" id="custom-id" class="input" maxlength="30"><br><input type="text" placeholder="username (optional)" id="custom-name" class="input" maxlength="20"></div>
        <button class="button" id="custom">create</button>
        <sub id="tip">Code must be 6 <font color="red">letters</font> or more.</sub>
      </div>
      <div class="line"></div>
      <div class="side join">
        <h1 id="mobile">join a chat</h1>
        <div><input type="text" placeholder="chat ID" id="join-id" class="input"></div>
        <button class="button" id="join">join</button>
        <p class="error hidden" id="id-error"></p>
      </div>
      <div class="footer" id="footer">
      <sub id="tip">Issues with PeerJS may have been resolved. <font color="blue" onclick="servStat()" class="cursor">Check the server status</font>.</sub>
      </div>
    </div>
		<br><br>
    <div class="chat" id="chat"></div>
    <input type="text" placeholder="send a message" id="message" autocomplete="off" maxlength="2000" onkeyup="checkAmount()" disabled>
    <script src="main.js"></script>
    <script>
      if (location.protocol !== 'https:') {
        document.getElementById('body').innerHTML = "redirecting to HTTPS...";
        location.replace(`https:${location.href.substring(location.protocol.length)}`);
      }
    </script>
  </body>
</html>
